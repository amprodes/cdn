{"version":3,"file":"chat-component.js","sourceRoot":"","sources":["../../../src/components/chat-component/chat-component.tsx"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,CAAC,EAAE,KAAK,EAAE,MAAM,eAAe,CAAC;AACpD,OAAO,EAAE,MAAM,EAAE,MAAM,gBAAgB,CAAC;AAExC,wCAAwC;AACxC,OAAO,EAAE,QAAQ,EAAE,MAAM,mBAAmB,CAAC;AAE7C;;GAEG;AAMH,MAAM,OAAO,aAAa;;oBAIW;MACjC,EAAE,IAAI,EAAE,sDAAsD,EAAE,MAAM,EAAE,MAAM,CAAC,IAAI,EAAE,EAAE,EAAE,CAAC,EAAE;MAC5F,EAAE,IAAI,EAAE,8FAA8F,EAAE,MAAM,EAAE,MAAM,CAAC,IAAI,EAAE,EAAE,EAAE,CAAC,EAAE;MACpI,EAAE,IAAI,EAAE,6BAA6B,EAAE,MAAM,EAAE,MAAM,CAAC,IAAI,EAAE,EAAE,EAAE,CAAC,EAAE;KACpE;4BAKoC,IAAI;;EAEzC;;;KAGG;EACH,iBAAiB;IACf,QAAQ,CAAC,UAAU,EAAE,CAAC,WAAW,EAAE,EAAE;MACnC,OAAO,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;MACzB,IAAI,CAAC,QAAQ,GAAG,CAAC,GAAG,IAAI,CAAC,QAAQ,EAAE,WAAW,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;IAC1E,CAAC,CAAC,CAAC;EACL,CAAC;EACD,4BAA4B;EAC5B,eAAe;IACb,MAAM,WAAW,GAAG,MAAM,CAAC,UAAU,CAAC;IACtC,IAAI,WAAW,GAAG,GAAG,EAAE,EAAE,gFAAgF;MACvG,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;KAC/B;SAAM;MACL,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;KAC9B;EACH,CAAC;EAED;;;;;KAKG;EACK,SAAS,CAAC,KAAa;IAC7B,IAAI,KAAK,KAAK,CAAC,EAAE;MACf,OAAO,gCAAgC,CAAC;KACzC;SAAM;MACL,IAAI,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,MAAM,KAAK,IAAI,CAAC,QAAQ,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,MAAM,EAAE;QACnE,OAAO,gCAAgC,CAAC;OACzC;KACF;EACH,CAAC;EAED,MAAM;IACJ,OAAO,CACL,WAAK,KAAK,EAAC,gBAAgB;MACzB,eAEI,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,OAAO,EAAE,CAAC,EAAE,EAAE,CAC/B,WAAK,GAAG,EAAE,OAAO,CAAC,EAAE,EAAE,KAAK,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;QAC5C,mBAAa,IAAI,EAAE,OAAO,CAAC,IAAI,EAAE,MAAM,EAAE,OAAO,CAAC,MAAM,GAAgB,CACnE,CACP,CAEC,CACF,CACP,CAAC;EACJ,CAAC;;;;;;;;;;;;;CACF","sourcesContent":["import { Component, h, State } from '@stencil/core';\nimport { Sender } from './enums/sender';\nimport ChatMessage from './interfaces/ChatMessage.interface';\n// import state from '../../store/store'\nimport { onChange } from '../../store/store';\n\n/**\n * Represents the chat component.\n */\n@Component({\n  tag: 'chat-component',\n  styleUrl: 'chat-component.scss',\n  shadow: true,\n})\nexport class ChatComponent {\n  /**\n   * The array of chat messages.\n   */\n  @State() messages: ChatMessage[] = [\n    { text: \"¡Hola! Soy Vivi, la asistente virtual de Davivienda.\", sender: Sender.VIVI, id: 1 },\n    { text: \"Si tiene clave virtual, ingrese con ella para poder recibir información sobre sus productos.\", sender: Sender.VIVI, id: 2 },\n    { text: \"¿En qué puedo ayudarle hoy?\", sender: Sender.VIVI, id: 3 }\n  ];\n\n  /**\n   * Indicates whether the chat component is visible.\n   */\n  @State() isElementVisible: boolean = true;\n\n  /**\n   * Lifecycle method called when the component is connected to the DOM.\n   * Listens for changes in the 'messages' property of the store and appends new messages to the existing messages array.\n   */\n  connectedCallback() {\n    onChange('messages', (newMessages) => {\n      console.log(newMessages);\n      this.messages = [...this.messages, newMessages[newMessages.length - 1]];\n    });\n  }\n  // eslint-disable-next-line \n  checkWindowSize() {\n    const windowWidth = window.innerWidth;\n    if (windowWidth < 768) { // Ejemplo: Ocultar el elemento cuando el ancho de la ventana es menor que 768px\n      this.isElementVisible = false;\n    } else {\n      this.isElementVisible = true;\n    }\n  }\n\n  /**\n   * Adds margin to the chat component based on the message index.\n   * @param index - The index of the message.\n   * @returns The CSS class for adding margin.\n   * @private\n   */\n  private addMargin(index: number) {\n    if (index === 0) {\n      return 'chat-component__initial-margin';\n    } else {\n      if (this.messages[index].sender !== this.messages[index - 1].sender) {\n        return 'chat-component__initial-margin';\n      }\n    }\n  }\n\n  render() {\n    return (\n      <div class='chat-component'>\n        <div>\n          {\n            this.messages.map((message, i) =>\n              <div key={message.id} class={this.addMargin(i)}>\n                <chat-bubble text={message.text} sender={message.sender}></chat-bubble>\n              </div>\n            )\n          }\n        </div>\n      </div>\n    );\n  }\n}\n"]}